<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Fruit Cut ‚Äî Mobile Fullscreen</title>
<style>
:root {
  --bg: #f4f7fb;
  --panel: #efe9e1;
  --accent: #22c55e;
}
* { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }
body {
  margin: 0;
  padding: 0;
  background: var(--bg);
  font-family: 'Poppins', sans-serif;
  overflow: hidden;
  height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
}
h1 {
  font-size: 1.6rem;
  margin: 10px 0;
}
.hud {
  display: flex;
  gap: 10px;
  justify-content: center;
  flex-wrap: wrap;
  margin-bottom: 8px;
}
.stat {
  background: #fff;
  padding: 6px 12px;
  border-radius: 10px;
  font-weight: bold;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
#gameWrapper {
  position: relative;
  width: 100%;
  flex: 1;
  max-width: 100%;
  height: calc(100vh - 150px);
  background: var(--panel);
  border-radius: 16px;
  overflow: hidden;
  touch-action: none;
}
#gameArea, #bladeCanvas, #particles {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
}
.fruit {
  position: absolute;
  width: 80px;
  transform: translate(-50%, -50%);
  pointer-events: none;
  user-select: none;
}
.half {
  position: absolute;
  transform: translate(-50%, -50%);
  pointer-events: none;
}
#startBtn {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #111;
  color: #fff;
  border: none;
  padding: 14px 26px;
  border-radius: 12px;
  font-weight: bold;
  font-size: 1rem;
  cursor: pointer;
  z-index: 10;
}
#controls {
  margin: 8px 0;
  display: flex;
  gap: 8px;
  justify-content: center;
}
button {
  background: #fff;
  border: none;
  padding: 10px 14px;
  border-radius: 10px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.1);
  font-weight: bold;
  cursor: pointer;
}
#gameOver {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.75);
  color: #fff;
  display: none;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 99;
}
#gameOver button {
  background: #fff;
  color: #000;
  margin-top: 10px;
  font-weight: bold;
}
</style>
</head>
<body>
  <h1>üçâ Fruit Cut ‚Äì Mobile</h1>
  <div class="hud">
    <div class="stat">Score: <span id="score">0</span></div>
    <div class="stat">Lives: <span id="lives">3</span></div>
    <div class="stat">Coins: <span id="coins">0</span></div>
  </div>

  <div id="gameWrapper">
    <div id="gameArea"></div>
    <canvas id="bladeCanvas"></canvas>
    <canvas id="particles"></canvas>
    <button id="startBtn">START</button>
    <div id="gameOver">
      <h2>Game Over</h2>
      <p>Score: <span id="finalScore">0</span></p>
      <button id="restartBtn">Restart</button>
    </div>
  </div>

  <div id="controls">
    <button id="pauseBtn">Pause</button>
  </div>

<script>
const IMG_PATH = 'images/';
const IMAGES = [
  'apple.png','banana.png','cantaloupe.png','guava.png','mango.png',
  'orange.png','papaya.png','pear.png','pineapple.png','plum.png',
  'pomegranate.png','strawberry.png','watermelon.png','bomb.png'
];

const area = document.getElementById('gameArea');
const bCanvas = document.getElementById('bladeCanvas');
const pCanvas = document.getElementById('particles');
const bctx = bCanvas.getContext('2d');
const pctx = pCanvas.getContext('2d');
const startBtn = document.getElementById('startBtn');
const restartBtn = document.getElementById('restartBtn');
const pauseBtn = document.getElementById('pauseBtn');
const gameOver = document.getElementById('gameOver');
const scoreEl = document.getElementById('score');
const livesEl = document.getElementById('lives');
const coinsEl = document.getElementById('coins');
const finalScore = document.getElementById('finalScore');

let fruits = [], particles = [], cache = {};
let running = false, paused = false, score = 0, lives = 3, coins = 0;
let spawnTimer = null;
let bladePoints = [];
let width = area.clientWidth, height = area.clientHeight;

function resizeCanvas(){
  width = area.clientWidth;
  height = area.clientHeight;
  bCanvas.width = width;
  bCanvas.height = height;
  pCanvas.width = width;
  pCanvas.height = height;
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

function preload(){
  IMAGES.forEach(n=>{
    const img=new Image();
    img.src=IMG_PATH+n;
    cache[n]=img;
  });
}

function rand(min,max){return Math.random()*(max-min)+min;}

function spawnFruit(){
  if(!running||paused)return;
  const name=Math.random()<0.1?'bomb.png':IMAGES[Math.floor(Math.random()*(IMAGES.length-1))];
  const img=cache[name];
  const x=rand(60,width-60);
  const y=height+60;
  const vx=rand(-2.2,2.2);
  const vy=-rand(13,17);
  const el=document.createElement('img');
  el.src=img.src;
  el.className='fruit';
  el.style.left=x+'px';
  el.style.top=y+'px';
  area.appendChild(el);
  fruits.push({name,el,x,y,vx,vy,rot:0});
}

function updatePhysics(){
  for(let i=fruits.length-1;i>=0;i--){
    const f=fruits[i];
    f.vy+=0.25;
    f.x+=f.vx;
    f.y+=f.vy;
    f.rot+=2;
    f.el.style.left=f.x+'px';
    f.el.style.top=f.y+'px';
    f.el.style.transform=`translate(-50%,-50%) rotate(${f.rot}deg)`;
    if(f.y>height+100){
      f.el.remove();
      fruits.splice(i,1);
    }
  }
}

function drawBlade(){
  bctx.clearRect(0,0,width,height);
  if(bladePoints.length>1){
    bctx.lineJoin='round';bctx.lineCap='round';
    for(let i=0;i<bladePoints.length-1;i++){
      const a=bladePoints[i],b=bladePoints[i+1];
      const alpha=Math.max(0,1-(Date.now()-a.t)/300);
      bctx.strokeStyle=`rgba(34,197,94,${alpha})`;
      bctx.lineWidth=8*alpha;
      bctx.beginPath();bctx.moveTo(a.x,a.y);bctx.lineTo(b.x,b.y);bctx.stroke();
    }
  }
  bladePoints=bladePoints.filter(p=>Date.now()-p.t<350);
  requestAnimationFrame(drawBlade);
}
drawBlade();

function checkSlice(x,y){
  for(let i=fruits.length-1;i>=0;i--){
    const f=fruits[i];
    const r=f.el.getBoundingClientRect();
    if(x>r.left&&x<r.right&&y>r.top&&y<r.bottom){
      if(f.name==='bomb.png'){
        lives--;
        if(lives<=0)endGame();
      }else{
        score+=10;coins++;
      }
      updateHUD();
      spawnParticles(f.x,f.y,f.name==='bomb.png'?'#ff4d4d':'#ffeb3b');
      createHalves(f);
      f.el.remove();
      fruits.splice(i,1);
    }
  }
}

function createHalves(f){
  const left=document.createElement('img');
  const right=document.createElement('img');
  [left,right].forEach(el=>{
    el.src=f.el.src;
    el.className='half';
    el.style.width='80px';
    el.style.left=f.x+'px';
    el.style.top=f.y+'px';
    area.appendChild(el);
  });
  left.style.clipPath='polygon(0 0,50% 0,50% 100%,0 100%)';
  right.style.clipPath='polygon(50% 0,100% 0,100% 100%,50% 100%)';
  let vy=-5,vxL=-3,vxR=3;
  const fall=()=>{vy+=0.3;
    f.y+=vy;f.x+=vxL;left.style.left=f.x+'px';left.style.top=f.y+'px';
    f.x+=vxR*2;right.style.left=f.x+'px';right.style.top=f.y+'px';
  };
  let t=setInterval(()=>{fall();},30);
  setTimeout(()=>{clearInterval(t);left.remove();right.remove();},800);
}

function spawnParticles(x,y,color){
  for(let i=0;i<15;i++){
    particles.push({x,y,vx:rand(-3,3),vy:rand(-5,1),color,life:rand(500,900),age:0});
  }
}

function drawParticles(dt){
  pctx.clearRect(0,0,width,height);
  for(let i=particles.length-1;i>=0;i--){
    const p=particles[i];
    p.vy+=0.2;p.x+=p.vx;p.y+=p.vy;p.age+=dt;
    const alpha=1-p.age/p.life;
    pctx.globalAlpha=alpha;
    pctx.fillStyle=p.color;
    pctx.beginPath();pctx.arc(p.x,p.y,4,0,Math.PI*2);pctx.fill();
    if(p.age>p.life)particles.splice(i,1);
  }
}

function gameLoop(){
  if(!running)return;
  if(!paused){
    updatePhysics();
    drawParticles(16);
  }
  requestAnimationFrame(gameLoop);
}

function startGame(){
  if(running)return;
  running=true;paused=false;
  startBtn.style.display='none';
  gameOver.style.display='none';
  score=0;lives=3;coins=0;updateHUD();
  spawnTimer=setInterval(spawnFruit,700);
  gameLoop();
}
function pauseGame(){
  if(!running)return;
  paused=!paused;
  pauseBtn.textContent=paused?'Resume':'Pause';
}
function endGame(){
  running=false;clearInterval(spawnTimer);
  finalScore.textContent=score;
  gameOver.style.display='flex';
}
function restartGame(){
  fruits.forEach(f=>f.el.remove());
  fruits=[];particles=[];
  gameOver.style.display='none';
  startGame();
}
function updateHUD(){
  scoreEl.textContent=score;
  livesEl.textContent=lives;
  coinsEl.textContent=coins;
}

area.addEventListener('pointermove',e=>{
  const rect=area.getBoundingClientRect();
  const x=e.clientX-rect.left;
  const y=e.clientY-rect.top;
  bladePoints.push({x,y,t:Date.now()});
  checkSlice(e.clientX,e.clientY);
});

startBtn.onclick=startGame;
pauseBtn.onclick=pauseGame;
restartBtn.onclick=restartGame;

preload();
</script>
</body>
  </html>
