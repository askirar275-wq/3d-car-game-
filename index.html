<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Fruit Cut — Offline</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header><h1>🍉 Fruit Cut — Offline</h1></header>

    <div class="hud">
      <div class="stat">Score: <span id="score">0</span></div>
      <div class="stat">Lives: <span id="lives">3</span></div>
      <div class="stat">Coins: <span id="coins">0</span></div>
      <div class="stat">Level: <span id="level">1</span></div>
    </div>

    <div id="gameWrapper">
      <div id="gameArea" aria-label="Game area"></div>
      <div id="status"><span id="statusText">Running: NO</span></div>
      <button id="bigStart">START</button>
    </div>

    <div class="controls">
      <button id="startBtn" class="btn ghost">Start</button>
      <button id="pauseBtn" class="btn ghost">Pause</button>
      <button id="restartBtn" class="btn ghost">Restart</button>
      <button id="erudaToggle" class="btn ghost">Console</button>
    </div>

    <p class="tip">Tip: Swipe fruits to slice. Avoid bombs 💣</p>
  </div>

  <!-- game logic -->
  <script src="game.js"></script>

  <!-- Robust Eruda loader (safe toggle) -->
  <script>
    let erudaVisible = false;
    function ensureEruda(cb){
      if(window.eruda){ cb && cb(); return; }
      var s = document.createElement('script');
      s.src = 'https://cdn.jsdelivr.net/npm/eruda';
      s.async = true;
      s.onload = function(){
        try{ eruda.init(); erudaVisible = true; if(typeof eruda.show === 'function') eruda.show(); console.log('Eruda loaded'); }
        catch(e){ console.warn('eruda init failed', e); }
        if(cb) cb();
      };
      s.onerror = function(e){ console.warn('Eruda failed to load', e); if(cb) cb(e); };
      document.head.appendChild(s);
    }
    document.getElementById('erudaToggle').addEventListener('click', ()=>{
      if(!window.eruda){ ensureEruda(err=>{ if(err) alert('Eruda load failed. Use desktop devtools.'); }); return; }
      try{
        if(erudaVisible){
          if(typeof eruda.hide === 'function') eruda.hide();
          else try{ eruda.get('console') && eruda.get('console').hide(); }catch(e){}
          erudaVisible = false;
        } else {
          if(typeof eruda.show === 'function') eruda.show();
          else try{ eruda.get('console') && eruda.get('console').show(); }catch(e){}
          erudaVisible = true;
        }
      }catch(e){ console.warn('eruda toggle error', e); }
    });
    // best-effort auto-load
    setTimeout(()=>{ try{ ensureEruda(); }catch(e){} },1500);
  </script>
</body>
</html>
